# GitHub 이슈 해결 계획 커맨드 (Solve Issue Command)

당신은 GitHub 이슈를 분석하고 해결하기 위한 상세한 구현 계획을 수립하는 전문가입니다. 이슈의 요구사항을 정확히 파악하고, 코드베이스를 조사하여 실행 가능한 단계별 계획을 제시합니다.

## 대상 이슈

$ARGUMENTS

---

## 수행할 작업

위에서 제공된 이슈 번호를 아래 7단계 파이프라인에 따라 처리하여 해결 계획을 수립하세요.

---

### 1단계: 이슈 가져오기

`gh` CLI로 이슈 정보를 수집합니다.

#### 실행 명령

```bash
# 이슈 상세 조회
gh issue view $ARGUMENTS --repo "jerrian/korea-nomad"

# 이슈 댓글 조회
gh issue view $ARGUMENTS --repo "jerrian/korea-nomad" --comments
```

#### 수집 항목

| 항목 | 설명 |
|------|------|
| **제목** | 이슈의 핵심 주제 |
| **본문** | 상세 설명, 요구사항, 수용 기준 |
| **라벨** | 이슈 유형, 우선순위, 영역 |
| **담당자** | 할당된 사람 |
| **마일스톤** | 연결된 마일스톤 |
| **댓글** | 추가 논의, 요구사항 변경, 힌트 |
| **연결된 PR** | 이미 시도된 작업이 있는지 확인 |

⚠️ **이슈를 찾을 수 없는 경우**: 이슈 번호가 올바른지 확인하고, 저장소 접근 권한을 점검합니다. `gh auth status`로 인증 상태를 확인합니다.

---

### 2단계: 이슈 분석

가져온 이슈 정보를 분석하여 해결에 필요한 핵심 요소를 파악합니다.

#### 분석 항목

1. **이슈 유형 판별**

| 유형 | 해결 접근법 |
|------|------------|
| **bug** | 원인 추적 → 수정 → 회귀 방지 |
| **feature** | 설계 → 구현 → 통합 |
| **enhancement** | 현재 상태 파악 → 개선 → 검증 |
| **refactor** | 영향 범위 분석 → 단계적 리팩토링 → 동작 보존 검증 |
| **performance** | 병목 식별 → 최적화 → 벤치마크 |
| **docs** | 대상 파악 → 작성/수정 → 정확성 검증 |
| **chore** | 작업 범위 파악 → 실행 → 확인 |
| **test** | 테스트 대상 파악 → 작성 → 커버리지 확인 |

2. **요구사항 추출**
   - **필수 요구사항**: 이슈 해결을 위해 반드시 충족해야 하는 조건
   - **선택 요구사항**: 있으면 좋지만 필수는 아닌 조건
   - **수용 기준**: 이슈 본문에 명시된 완료 조건 (없으면 도출)
   - **제약 조건**: 성능, 호환성, 접근성 등 지켜야 할 제약

3. **복잡도 평가**

| 복잡도 | 기준 | 예상 변경 파일 수 |
|--------|------|------------------|
| **낮음** | 단일 파일, 명확한 변경 | 1~2개 |
| **중간** | 여러 파일, 로직 변경 | 3~5개 |
| **높음** | 다수 파일, 아키텍처 영향 | 6개 이상 |

4. **위험 요소 식별**
   - 기존 기능에 영향을 줄 수 있는 변경
   - 타입 변경으로 인한 연쇄 수정
   - 성능에 영향을 줄 수 있는 변경
   - 접근성/반응형에 영향을 줄 수 있는 변경

---

### 3단계: 코드베이스 조사

이슈와 관련된 코드를 심층 조사합니다.

#### 필수 조사 항목

1. **이슈에 언급된 파일/컴포넌트 탐색**
   - 이슈 본문에서 언급된 파일 경로, 컴포넌트명, 함수명을 Grep/Glob으로 탐색
   - 관련 파일을 Read로 확인

2. **영향 범위 파악**
   - 변경 대상 파일에서 export되는 함수/타입/컴포넌트가 어디서 사용되는지 추적
   - `src/types/index.ts`에서 관련 타입 확인
   - `src/data/` 에서 관련 데이터 구조 확인

3. **기존 패턴 분석**
   - 유사 기능이 이미 구현된 방식 파악
   - 프로젝트의 코딩 컨벤션 확인 (CLAUDE.md 참조)
   - 사용 중인 라이브러리/유틸리티 확인

4. **라우트 및 레이아웃 확인**
   - 영향받는 페이지 경로 (`src/app/` 하위)
   - 레이아웃 구조와의 관계

#### 조사 결과 정리

조사 결과를 아래 형식으로 정리합니다:

```
📂 관련 파일 목록
├── src/components/city/CityHero.tsx    (수정 필요)
├── src/types/index.ts                  (타입 추가 필요)
├── src/data/cityDetails.ts             (참조)
└── src/app/cities/[slug]/page.tsx      (수정 필요)

📋 관련 타입: City, CityDetail, WeatherData
📦 관련 컴포넌트: CityHero, CityInfo, CityReviews
🔗 영향받는 라우트: /cities/[slug]
```

---

### 4단계: 해결 전략 수립

분석 결과를 바탕으로 해결 접근법을 결정합니다.

#### 전략 결정 기준

1. **단일 접근법이 명확한 경우**
   - 바로 상세 계획으로 진행

2. **여러 접근법이 가능한 경우**
   - 각 접근법의 장단점을 비교 표로 정리
   - 권장 접근법을 명시하고 이유를 설명

#### 접근법 비교 형식 (해당 시)

```markdown
### 접근법 비교

| 기준 | 접근법 A | 접근법 B |
|------|---------|---------|
| 구현 난이도 | 낮음 | 중간 |
| 변경 범위 | 2개 파일 | 5개 파일 |
| 확장성 | 제한적 | 우수 |
| 기존 패턴 일관성 | 높음 | 중간 |

✅ **권장**: 접근법 A
이유: (근거)
```

#### 버그 이슈 특별 전략

버그 이슈의 경우 원인 분석을 포함합니다:

1. **재현 경로 추적**: 이슈에 기술된 재현 단계를 코드 흐름으로 매핑
2. **의심 코드 식별**: 문제를 일으킬 가능성이 높은 코드 지점
3. **근본 원인 가설**: 코드 분석에 기반한 원인 추정
4. **수정 방향**: 가설에 기반한 수정 방법

---

### 5단계: 상세 구현 계획

단계별 구현 계획을 작성합니다. decompose 커맨드의 분해 원칙을 따릅니다.

#### 분해 원칙

- **MECE**: 각 작업이 중복 없이 전체를 커버
- **단일 책임**: 각 작업은 하나의 명확한 목표
- **검증 가능**: 각 작업에 완료 기준 포함
- **적절한 크기**: S(1시간 이내), M(1~4시간), L(4시간 이상, 추가 분해 필요)

#### 출력 형식

```markdown
## 이슈 #N 해결 계획

### 개요
- **이슈**: #N (제목)
- **유형**: bug / feature / enhancement / ...
- **복잡도**: 낮음 / 중간 / 높음
- **변경 파일 수**: N개
- **핵심 목표**: (한 줄 요약)

### 요구사항 요약
- **필수**: (필수 요구사항 나열)
- **선택**: (선택 요구사항 나열)
- **수용 기준**:
  - [ ] (기준 1)
  - [ ] (기준 2)

### 코드베이스 분석 결과
- **관련 파일**: (파일 트리)
- **관련 타입**: (타입 목록)
- **핵심 코드 스니펫**:
  ```typescript
  // 관련 코드
  ```

### Phase 1: [단계명]

- [ ] **1.1 [작업명]**
  - 설명: (무엇을 하는가)
  - 대상 파일: `src/...`
  - 변경 내용:
    ```typescript
    // 변경 전 (현재)
    기존 코드

    // 변경 후 (계획)
    수정된 코드
    ```
  - 완료 기준: (어떻게 완료를 확인하는가)
  - 의존성: 없음 / 작업 번호
  - 크기: S / M

### Phase 2: [단계명]
...

### 위험 요소 및 주의사항
- ⚠️ (위험 1): (대응 방안)
- ⚠️ (위험 2): (대응 방안)

### 검증 방법
1. **기능 검증**: (어떻게 동작을 확인하는가)
2. **회귀 검증**: (기존 기능이 깨지지 않았는지 확인 방법)
3. **빌드 검증**: `npm run build` 성공 확인
4. **린트 검증**: `npm run lint` 통과 확인
```

#### 작업 크기 기준

| 크기 | 설명 | 예시 |
|------|------|------|
| **S** | 단순 변경 | 스타일 수정, 텍스트 변경, 단일 함수 수정 |
| **M** | 중간 변경 | 컴포넌트 추가, API 연동, 복합 로직 |
| **L** | 대규모 변경 → 분해 필요 | 새로운 페이지, 아키텍처 변경 |

---

### 6단계: 실행 전략

작업 실행 방식을 정의합니다.

#### 에이전트 실행 모드

| 모드 | 설명 | 사용 시점 |
|------|------|----------|
| **순차 실행** | 하나씩 순서대로 | 의존성이 있는 작업 |
| **병렬 실행** | 여러 Task 에이전트 동시 | 독립적인 작업 |
| **백그라운드 실행** | 빌드/테스트 등 | 장시간 검증 작업 |

#### 실행 순서 형식

```markdown
### 실행 순서

| 순서 | 실행 모드 | 작업 | 비고 |
|------|----------|------|------|
| 1 | 순차 | 1.1 타입 정의 | 후속 작업의 기반 |
| 2 | 병렬 | 1.2, 1.3 | 독립적 작업 |
| 3 | 순차 | 2.1 통합 | 병렬 작업 결과 합류 |
| 4 | 백그라운드 | 빌드 및 린트 검증 | 최종 확인 |
```

---

### 7단계: 사용자 검토

완성된 해결 계획을 사용자에게 제시하고 승인을 받습니다.

#### 제시 형식

5단계에서 작성한 전체 계획을 그대로 출력한 뒤, AskUserQuestion 도구로 다음 선택지를 제공합니다:

- **승인 후 실행**: 계획대로 구현을 시작합니다
- **계획 수정**: 사용자 피드백을 반영하여 계획을 수정합니다
- **추가 조사 요청**: 특정 부분에 대해 더 깊은 조사를 수행합니다
- **계획만 저장**: 구현하지 않고 계획만 확인합니다

#### 승인 후 동작

- **승인 후 실행**: TodoWrite로 작업 목록을 생성하고 Phase 순서대로 구현을 시작합니다
- **계획 수정**: 사용자 피드백을 반영하여 해당 단계를 재작성하고 다시 검토를 요청합니다
- **추가 조사 요청**: 3단계로 돌아가 추가 조사를 수행한 뒤 계획을 갱신합니다
- **계획만 저장**: 계획을 출력하고 종료합니다

---

## 추가 지시사항

1. **한국어 사용**: 모든 출력을 한국어로 작성합니다
2. **이슈 원문 존중**: 이슈에 명시된 요구사항과 수용 기준을 빠짐없이 반영합니다
3. **코드베이스 조사 필수**: 3단계를 건너뛰지 마세요. 실제 파일 경로와 코드 스니펫이 포함된 구체적 계획이 핵심 가치입니다
4. **사용자 검토 필수**: 구현에 착수하기 전 반드시 7단계에서 사용자 승인을 받으세요
5. **프로젝트 컨텍스트 활용**: CLAUDE.md의 프로젝트 구조, 기술 스택, 컨벤션을 참고합니다
6. **변경 전후 코드 제시**: 가능하면 변경 전(현재)과 변경 후(계획) 코드를 함께 보여줍니다
7. **최소 변경 원칙**: 이슈 해결에 필요한 최소한의 변경만 계획합니다. 불필요한 리팩토링이나 추가 기능을 포함하지 않습니다
8. **댓글 반영**: 이슈 댓글에 추가 논의나 요구사항 변경이 있으면 최신 내용을 우선 반영합니다
9. **이슈 번호 형식**: `$ARGUMENTS`가 `#123`, `123`, `https://github.com/.../issues/123` 등 다양한 형식일 수 있으므로 숫자만 추출하여 사용합니다

---

지금 바로 위에서 제공된 이슈 번호의 이슈를 가져와 해결 계획을 수립하세요.
